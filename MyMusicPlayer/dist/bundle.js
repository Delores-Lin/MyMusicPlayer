/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={163:()=>{var t=document.querySelectorAll("p"),e=document.querySelector("h2"),r=document.querySelector("#main"),n=document.querySelector("#mainView"),o=document.querySelector("#searchBar"),a=document.querySelector("#Home"),i=document.querySelector("#leftMain"),c=document.querySelector(".repository"),s=document.querySelectorAll(".icon"),u=document.querySelectorAll(".iconB"),l=document.querySelector("#switchMod");l.addEventListener("change",(function(){0==l.checked?(t.forEach((function(t){return t.style.color="black"})),e.style.color="black",r.style.backgroundColor="white",n.style.backgroundColor="rgb(200, 200, 200)",o.style.backgroundColor="rgb(200, 200, 200)",a.style.backgroundColor="rgb(200, 200, 200)",i.style.backgroundColor="rgb(200, 200, 200)",c.style.background="linear-gradient(rgb(200, 200, 200),rgb(200, 200, 200)80%,rgb(0, 0, 0,0)100%)",u.forEach((function(t){return t.style.display="flex"})),s.forEach((function(t){return t.style.display="none"})),l.checked=!1):(t.forEach((function(t){return t.style.color="white"})),e.style.color="white",r.style.backgroundColor="#121212",n.style.backgroundColor="rgb(45, 45, 45,0.5)",o.style.backgroundColor="rgb(67, 67, 67)",a.style.backgroundColor="rgb(67, 67, 67)",i.style.backgroundColor="rgb(67, 67, 67)",c.style.background="linear-gradient(rgb(67, 67, 67),rgb(67, 67, 67)80%,rgb(0, 0, 0,0)100%)",u.forEach((function(t){return t.style.display="none"})),s.forEach((function(t){return t.style.display="flex"})),l.checked=!0)}))},236:()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e;function r(){"use strict";r=function(){return n};var e,n={},o=Object.prototype,a=o.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(e){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:O(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var y="suspendedStart",d="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var L=Object.getPrototypeOf,S=L&&L(L(N([])));S&&S!==o&&a.call(S,s)&&(k=S);var E=x.prototype=w.prototype=Object.create(k);function _(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function P(e,r){function n(o,i,c,s){var u=p(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==t(f)&&a.call(f,"__await")?r.resolve(f.__await).then((function(t){n("next",t,c,s)}),(function(t){n("throw",t,c,s)})):r.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return n("throw",t,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,e){function a(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(a,a):a()}})}function O(t,r,n){var o=y;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=p(t,r,n);if("normal"===u.type){if(o=n.done?v:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function q(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(q,this),this.reset(!0)}function N(r){if(r||""===r){var n=r[s];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,i=function t(){for(;++o<r.length;)if(a.call(r,o))return t.value=r[o],t.done=!1,t;return t.value=e,t.done=!0,t};return i.next=i}}throw new TypeError(t(r)+" is not iterable")}return b.prototype=x,i(E,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},n.awrap=function(t){return{__await:t}},_(P.prototype),f(P.prototype,u,(function(){return this})),n.AsyncIterator=P,n.async=function(t,e,r,o,a){void 0===a&&(a=Promise);var i=new P(h(t,e,r,o),a);return n.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(E),f(E,l,"Generator"),f(E,s,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},n}function n(t,e,r,n,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,a){var i=t.apply(e,r);function c(t){n(i,o,a,c,s,"next",t)}function s(t){n(i,o,a,c,s,"throw",t)}c(void 0)}))}}function a(t){throw new TypeError('"'+t+'" is read-only')}var i=JSON.parse(sessionStorage.getItem("tokenData")),c=i.access_token;function s(){return(s=o(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(sessionStorage.getItem("tokenData")){t.next=8;break}return JSON.parse(sessionStorage.getItem("tokenData")),a("tokenData"),c=i.access_token,console.log(c),t.next=6,new Promise((function(t){return setTimeout(t,1e3)}));case 6:t.next=0;break;case 8:console.log("Token已获取");case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}null===c&&(c=i.access_token,function(){s.apply(this,arguments)}()),c=i.access_token,console.log(c),headers={Authorization:"Bearer ".concat(c)};var u="[00:00.0]One Call Away - Charlie Puth\n[00:00.18]   \n[00:00.18]Written by：Breyan Isaac/Justin Franks/Blake Carter/Maureen McDonald/Charlie Puth/Matthew Prime\n[00:00.36]   \n[00:00.36]I'm only one call away\n[00:05.05]你一通电话我便及时出现\n[00:05.05]I'll be there to save the day\n[00:10.5]我会即刻出现在你身边\n[00:10.5]Superman got nothing on me\n[00:16.11]就算是超人也很难像我这样及时出现\n[00:16.11]I'm only one call away\n[00:23.04]你一通电话我便及时出现\n[00:23.04]Call me baby if you need a friend\n[00:28.29]如果你需要有人相伴 请给我电话\n[00:28.29]I just wanna give you love\n[00:31.33]我只想给你我所有的爱\n[00:31.33]C'mon c'mon c'mon\n[00:33.6]打给我吧\n[00:33.6]Reaching out to you so take a chance\n[00:38.11]我已向你伸出双臂 就请让我爱你\n[00:38.11]No matter where you go\n[00:40.79]无论你身在何处\n[00:40.79]Know you're not alone\n[00:42.49]要知道你并不是孤身一人\n[00:42.49]I'm only one call away\n[00:47.46]你一通电话我便及时出现\n[00:47.46]I'll be there to save the day\n[00:52.66]我会即刻出现在你身边\n[00:52.66]Superman got nothing on me\n[00:58.21]就算是超人也很难像我这样及时出现\n[00:58.21]I'm only one call away\n[01:05.17]你一通电话我便及时出现\n[01:05.17]Come along with me and don't be scared\n[01:10.49]跟我一起 不要害怕\n[01:10.49]I just wanna set you free\n[01:13.46]我只想让你自由随心\n[01:13.46]C'mon c'mon c'mon\n[01:15.67]打给我吧 打给我吧\n[01:15.67]You and me can make it anywhere\n[01:20.13]你和我 我们能抵达任何地方\n[01:20.13]For now we can stay here for a while\n[01:25.26]或者就像现在这样 在此时此地自由徜徉\n[01:25.26]Cause you know I just wanna see your smile\n[01:30.86]因为你知道我只想看见你的笑容\n[01:30.86]No matter where you go\n[01:33.47]无论你身在何处\n[01:33.47]You know you're not alone\n[01:35.229996]你要知道你并不是孤身一人\n[01:35.229996]I'm only one call away\n[01:40.240005]你一通电话我便及时出现\n[01:40.240005]I'll be there to save the day\n[01:45.4]我会即刻出现在你身边\n[01:45.4]Superman got nothing on me\n[01:51.04]就算是超人也很难像我这样及时出现\n[01:51.04]I'm only one call away\n[01:56.32]你一通电话我便及时出现\n[01:56.32]And when you're weak I'll be strong\n[02:01.55]你脆弱无助时 我会坚强的守护你\n[02:01.55]I'm gonna keep holding on\n[02:06.85]我会一直坚持\n[02:06.85]Now don't you worry it won't be long\n[02:11.52]不用担心 悲伤不会漫长\n[02:11.52]Darling and when you feel like hope is gone\n[02:15.42]亲爱的如果你感觉毫无希望\n[02:15.42]Just run into my arms\n[02:17.33]请投入我的怀抱\n[02:17.33]I'm only one call away\n[02:22.15]你一通电话我便及时出现\n[02:22.15]I'll be there to save the day\n[02:27.66]我会即刻出现在你身边\n[02:27.66]Superman got nothing on me\n[02:33.37]就算是超人也很难像我这样及时出现\n[02:33.37]I'm only one I'm only one call away\n[02:43.45999]我会是唯一一个你一通电话我便及时出现\n[02:43.45999]I'll be there to save the day\n[02:48.76]我会即刻出现在你身边\n[02:48.76]Superman got nothing on me\n[02:54.44]就算是超人也很难像我这样及时出现\n[02:54.44]I'm only one call away\n[02:59.65]你一通电话我便及时出现\n[02:59.65]I'm only one call away\n[03:04.065]你一通电话我便及时出现".split("\n").map((function(t){var e=t.match(/\[(\d+):(\d+\.\d+)](.*)/);return e?{time:60*parseInt(e[1])+parseFloat(e[2]),text:e[3].trim()}:null})).filter((function(t){return null!==t})),l=document.getElementById("songlyrics");u.forEach((function(t){var e=document.createElement("p");e.textContent=t.text,l.appendChild(e)}));var f=document.querySelectorAll(".songlyrics p");function h(){return p.apply(this,arguments)}function p(){return(p=o(r().mark((function t(){var e,n,o,a,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://api.spotify.com/v1/me/player/currently-playing",{headers});case 3:if(200!==(e=t.sent).status){t.next=14;break}return t.next=7,e.json();case 7:return n=t.sent,console.log(n.progress_ms/1e3),o=document.querySelector("#lyricsPhoto img"),a=document.querySelector("#lyricsPhoto"),i=n.item.album.images[0].url,o.src!=i&&(o.src=i,a.style.setProperty("--album-background","url(".concat(i,")"))),t.abrupt("return",n.progress_ms/1e3);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),console.error("获取 Spotify 播放状态失败:",t.t0);case 19:return t.abrupt("return",0);case 20:case"end":return t.stop()}}),t,null,[[0,16]])})))).apply(this,arguments)}function y(){return y=o(r().mark((function t(){var e,n,o,a,i,c,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:for(n=t.sent,o=0,a=0;a<u.length;a++)n>=u[a].time&&(o=a);f.forEach((function(t,e){t.classList.toggle("highlight",e===o)})),i=(null===(e=f[0])||void 0===e?void 0:e.offsetHeight)+10||60,c=l.offsetHeight/2-i/2,s=o*i-c,console.log("offset",s),l.style.transform="translateY(".concat(-s,"px)");case 11:case"end":return t.stop()}}),t)}))),y.apply(this,arguments)}var d=(null===(e=f[0])||void 0===e?void 0:e.offsetHeight)||60,m=l.offsetHeight/2-d/2;l.style.transform="translateY(".concat(m,"px)"),setInterval((function(){return y.apply(this,arguments)}),1e3);var v=document.querySelector("#lyrics");document.querySelector("#albumPhoto").addEventListener("click",(function(){"grid"===window.getComputedStyle(v).display?(v.style.transform="translateY(100vh)",setTimeout((function(){v.style.display="none"}),300)):(v.style.transform="translateY(100vh)",v.style.display="grid",setTimeout((function(){v.style.transform="translateY(0)"}),50))}))},452:t=>{var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new q(n||[]);return o(i,"_invoke",{value:_(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function w(){}var b={};u(b,i,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(I([])));k&&k!==r&&n.call(k,i)&&(b=k);var L=w.prototype=v.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,a,i,c){var s=f(t[o],t,a);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function _(t,r,n){var o=h;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=P(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?d:p,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return g.prototype=w,o(L,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,s,"GeneratorFunction")),t.prototype=Object.create(L),t},t.awrap=function(t){return{__await:t}},S(E.prototype),u(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new E(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(L),u(L,s,"Generator"),u(L,i,(function(){return this})),u(L,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=I,q.prototype={constructor:q,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},659:()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";e=function(){return n};var r,n={},o=Object.prototype,a=o.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(r){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:O(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var y="suspendedStart",d="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var L=Object.getPrototypeOf,S=L&&L(L(N([])));S&&S!==o&&a.call(S,s)&&(k=S);var E=x.prototype=w.prototype=Object.create(k);function _(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function P(e,r){function n(o,i,c,s){var u=p(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==t(f)&&a.call(f,"__await")?r.resolve(f.__await).then((function(t){n("next",t,c,s)}),(function(t){n("throw",t,c,s)})):r.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return n("throw",t,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,e){function a(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(a,a):a()}})}function O(t,e,n){var o=y;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:r,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=p(t,e,n);if("normal"===u.type){if(o=n.done?v:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,e){var n=e.method,o=t.iterator[n];if(o===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,j(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,g;var i=a.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,g):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function q(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(q,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(a.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=r,t.done=!0,t};return i.next=i}}throw new TypeError(t(e)+" is not iterable")}return b.prototype=x,i(E,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},n.awrap=function(t){return{__await:t}},_(P.prototype),f(P.prototype,u,(function(){return this})),n.AsyncIterator=P,n.async=function(t,e,r,o,a){void 0===a&&(a=Promise);var i=new P(h(t,e,r,o),a);return n.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(E),f(E,l,"Generator"),f(E,s,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:N(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),g}},n}function r(t,e,r,n,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function c(t){r(i,o,a,c,s,"next",t)}function s(t){r(i,o,a,c,s,"throw",t)}c(void 0)}))}}console.log("je"),console.log("Hello");var o="59eee7863e184c0fb31ba10e24d2b480",a="http://localhost:3000/";function i(){return c.apply(this,arguments)}function c(){return(c=n(e().mark((function t(){var r,n,i;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=void 0,(e=new URLSearchParams(window.location.search).get("code"))&&(console.log(e),sessionStorage.setItem("code",e)),null==sessionStorage.getItem("code")){t.next=4;break}return console.log("has code already"),t.abrupt("return");case 4:r=Array(16).fill(0).map((function(){return Math.random().toString(36).charAt(2)})).join("").slice(0,16),sessionStorage.setItem("spotifyState",r),n=new URL("https://accounts.spotify.com/authorize"),i=new URLSearchParams({response_type:"code",client_id:o,scope:"user-read-private user-read-email user-top-read user-library-modify user-library-read user-read-currently-playing playlist-read-private playlist-read-collaborative playlist-modify-private playlist-modify-public user-modify-playback-state streaming",redirect_uri:a,state:r}),window.location.href="".concat(n,"?").concat(i);case 10:case"end":return t.stop()}var e}),t)})))).apply(this,arguments)}function s(){return(s=n(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i();case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function u(){return l.apply(this,arguments)}function l(){return(l=n(e().mark((function t(){var r,n,i,c,s;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new URLSearchParams(window.location.search),n=r.get("code"),r.get("state"),i=new URLSearchParams({grant_type:"authorization_code",code:n,redirect_uri:a}),t.prev=4,t.next=7,fetch("https://accounts.spotify.com/api/token",{method:"POST",body:i,headers:{"content-type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(o+":ec9bd930d9064e6fba7a762b9e67d7e6")}});case 7:return c=t.sent,t.next=10,c.json();case 10:(s=t.sent)&&s.refresh_token?(console.log(s),sessionStorage.setItem("tokenData",JSON.stringify(s)),sessionStorage.setItem("refresh_token",s.refresh_token)):console.log(!1,s),t.next=19;break;case 14:return t.prev=14,t.t0=t.catch(4),sessionStorage.removeItem("tokenData"),sessionStorage.removeItem("refresh_token"),t.abrupt("return",t.t0);case 19:case"end":return t.stop()}}),t,null,[[4,14]])})))).apply(this,arguments)}function f(){return(f=n(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!sessionStorage.getItem("tokenData")||!sessionStorage.getItem("refresh_token")){t.next=3;break}return console.log("tokenData",tokenData),t.abrupt("return");case 3:sessionStorage.getItem("code")?u():console.log("noCode");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(){return p.apply(this,arguments)}function p(){return(p=n(e().mark((function t(){var r,n,a,i;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=JSON.parse(sessionStorage.getItem("tokenData")),n=sessionStorage.getItem("refresh_token"),t.prev=2,t.next=5,fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:n,client_id:o})});case 5:return a=t.sent,t.next=8,a.json();case 8:i=t.sent,console.log(i.access_token),i.access_token&&(console.log("get new access_token"),r.access_token=i.access_token,console.log("tokenData.access_token",r.access_token),sessionStorage.setItem("tokenData",JSON.stringify(r)),sessionStorage.setItem("refresh_token",n)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),console.log("error:",t.t0);case 16:case"end":return t.stop()}}),t,null,[[2,13]])})))).apply(this,arguments)}function y(){return(y=n(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){s.apply(this,arguments)}(),function(){f.apply(this,arguments)}(),tokenData=JSON.parse(sessionStorage.getItem("tokenData")),console.log(tokenData),setInterval(function(){return y.apply(this,arguments)}(),3e6),h()},821:()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";e=function(){return n};var r,n={},o=Object.prototype,a=o.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(r){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:O(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var y="suspendedStart",d="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var L=Object.getPrototypeOf,S=L&&L(L(N([])));S&&S!==o&&a.call(S,s)&&(k=S);var E=x.prototype=w.prototype=Object.create(k);function _(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function P(e,r){function n(o,i,c,s){var u=p(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==t(f)&&a.call(f,"__await")?r.resolve(f.__await).then((function(t){n("next",t,c,s)}),(function(t){n("throw",t,c,s)})):r.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return n("throw",t,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,e){function a(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(a,a):a()}})}function O(t,e,n){var o=y;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:r,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=p(t,e,n);if("normal"===u.type){if(o=n.done?v:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,e){var n=e.method,o=t.iterator[n];if(o===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,j(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,g;var i=a.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,g):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function q(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(q,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(a.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=r,t.done=!0,t};return i.next=i}}throw new TypeError(t(e)+" is not iterable")}return b.prototype=x,i(E,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},n.awrap=function(t){return{__await:t}},_(P.prototype),f(P.prototype,u,(function(){return this})),n.AsyncIterator=P,n.async=function(t,e,r,o,a){void 0===a&&(a=Promise);var i=new P(h(t,e,r,o),a);return n.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(E),f(E,l,"Generator"),f(E,s,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:N(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),g}},n}function r(t,e,r,n,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function c(t){r(i,o,a,c,s,"next",t)}function s(t){r(i,o,a,c,s,"throw",t)}c(void 0)}))}}var o=JSON.parse(sessionStorage.getItem("tokenData")).access_token;console.log(o);var a={Authorization:"Bearer ".concat(o)},i=document.querySelector("#addToList"),c=document.querySelector("#addToPlaylist");function s(t,e,r,n){var o=document.getElementById("allList");if(o){var a=document.createElement("div");a.className="listBlock";var i=document.createElement("div");i.className="listPhoto";var c=document.createElement("img");c.className="listImage",t&&(c.src=t),i.appendChild(c);var s=document.createElement("p");s.innerHTML=r;var u=document.createElement("div");u.className="addButton";var l=document.createElement("img");l.id=e,l.src=n,u.appendChild(l),a.appendChild(i),a.appendChild(s),a.appendChild(u),o.appendChild(a)}else console.error("找不到 #allList 元素")}function u(){return l.apply(this,arguments)}function l(){return(l=n(e().mark((function t(){var r,n,o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new URLSearchParams({limit:5,offset:0}),t.prev=2,t.next=5,fetch("https://api.spotify.com/v1/me/playlists?".concat(r),{method:"GET",headers:a});case 5:return n=t.sent,t.next=8,n.json();case 8:return o=t.sent,t.abrupt("return",o);case 12:t.prev=12,t.t0=t.catch(2),console.log("Request Failed:",t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}function f(t){return h.apply(this,arguments)}function h(){return(h=n(e().mark((function t(r){var n,o,i,c,s;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.querySelector("#albumPhoto img"),o={playlist_id:r,uris:n.id},i=new URLSearchParams(o),t.prev=3,t.next=6,fetch("https://api.spotify.com/v1/playlists/".concat(r,"/tracks?").concat(i),{method:"POST",headers:a,body:new URLSearchParams({uris:[n.id]})});case 6:return c=t.sent,t.next=9,c.json();case 9:return s=t.sent,console.log(c),t.abrupt("return",s);case 14:t.prev=14,t.t0=t.catch(3),console.log("Request Failed:",t.t0);case 17:case"end":return t.stop()}}),t,null,[[3,14]])})))).apply(this,arguments)}function p(){return p=n(e().mark((function t(){var r,o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u();case 2:r=t.sent,o=document.querySelector("#albumPhoto img"),r.items.forEach(function(){var t=n(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(o.id,r.id);case 2:if(!t.sent){t.next=8;break}return t.next=6,s(r.images?r.images[0].url:"https://misc.scdn.co/liked-songs/liked-songs-64.png",r.id,r.name,"svg/ok-circle.svg");case 6:t.next=10;break;case 8:return t.next=10,s(r.images?r.images[0].url:"https://misc.scdn.co/liked-songs/liked-songs-64.png",r.id,r.name,"svg/add.svg");case 10:document.querySelectorAll(".addButton").forEach((function(t){t.addEventListener("click",n(e().mark((function r(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.querySelector("img"),console.log(n.src),!n.src.includes("svg/add.svg")){e.next=8;break}return e.next=5,f([n.id]);case 5:n.src="svg/ok-circle.svg",e.next=12;break;case 8:return console.log(o.id),e.next=11,g(o.id,n.id);case 11:n.src="svg/add.svg";case 12:case"end":return e.stop()}}),r)}))))}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}function y(t){return d.apply(this,arguments)}function d(){return(d=n(e().mark((function t(r){var n,o,i,c;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new URLSearchParams({playlist_id:r,fields:"tracks.items(track.uri)"}),t.prev=2,t.next=5,fetch("https://api.spotify.com/v1/playlists/".concat(r,"?").concat(n),{method:"GET",headers:a});case 5:return o=t.sent,t.next=8,o.json();case 8:return i=t.sent,c=i.tracks.items.map((function(t){return t.track.uri})),console.log(c),t.abrupt("return",c);case 14:t.prev=14,t.t0=t.catch(2),console.log("Request Failed:",t.t0);case 17:case"end":return t.stop()}}),t,null,[[2,14]])})))).apply(this,arguments)}function m(t,e){return v.apply(this,arguments)}function v(){return(v=n(e().mark((function t(r,n){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(n);case 2:if(!t.sent.includes(r)){t.next=7;break}return t.abrupt("return",!0);case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t,e){return w.apply(this,arguments)}function w(){return(w=n(e().mark((function t(r,n){var o,i;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return new URLSearchParams({playlist_id:n}),t.prev=2,console.log(r),t.next=6,fetch("https://api.spotify.com/v1/playlists/".concat(n,"/tracks"),{method:"DELETE",headers:a,body:JSON.stringify({tracks:[{uri:r}]})});case 6:return o=t.sent,t.next=9,o.json();case 9:return i=t.sent,console.log(o),t.abrupt("return",i);case 14:t.prev=14,t.t0=t.catch(2),console.log("Request Failed:",t.t0);case 17:case"end":return t.stop()}}),t,null,[[2,14]])})))).apply(this,arguments)}function b(t){return x.apply(this,arguments)}function x(){return(x=n(e().mark((function t(r){var o,i,c,u,l,h;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=sessionStorage.getItem("userId"),i=new URLSearchParams({user_id:o}),t.prev=3,t.next=6,fetch("https://api.spotify.com/v1/users/".concat(o,"/playlists/?").concat(i),{method:"POST",headers:a,body:JSON.stringify({name:r})});case 6:return c=t.sent,t.next=9,c.json();case 9:return 200===(u=t.sent).status&&(s("https://misc.scdn.co/liked-songs/liked-songs-64.png",u.id,u.name,"svg/add.svg"),l=document.querySelector("#".concat(u.id)),h=document.querySelector("#albumPhoto img"),addButton.addEventListener("click",n(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("svg/add.svg"!==l.src){t.next=6;break}return t.next=3,f([l.id]);case 3:l.src="svg/ok-circle.svg",t.next=10;break;case 6:return console.log(h.id),t.next=9,g(h.id,l.id);case 9:l.src="svg/add.svg";case 10:case"end":return t.stop()}}),t)}))))),t.abrupt("return",u);case 14:t.prev=14,t.t0=t.catch(3),console.log("Request Failed:",t.t0);case 17:case"end":return t.stop()}}),t,null,[[3,14]])})))).apply(this,arguments)}i.addEventListener("click",(function(){c.style.transform="translateY(100vh)",c.style.display="flex",document.querySelector("#allList").innerHTML="",function(){p.apply(this,arguments)}(),setTimeout((function(){c.style.transform="translateY(0)";var t=document.querySelector("#toCreateNewList"),e=document.querySelector("#createNewList");t.addEventListener("click",(function(){e.style.display="flex"})),document.querySelector("#close").addEventListener("click",(function(){e.style.display="none"}))}),300)})),c.addEventListener("click",(function(){c.style.transform="translateY(100vh)",setTimeout((function(){c.style.display="none"}),500)})),document.querySelector("#allList").addEventListener("click",(function(t){t.stopPropagation()})),document.querySelector("#createNewList").addEventListener("click",(function(t){t.stopPropagation()})),document.querySelector("#toCreateNewList").addEventListener("click",(function(t){t.stopPropagation()})),sessionStorage.getItem("userId");var k=document.querySelector("#newListName"),L=document.querySelector("#confirm");k.addEventListener("input",(function(){""!==k.value.trim()?(L.disabled=!1,L.classList.add("enabled")):L.disabled=!0})),L.addEventListener("click",n(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(k.value);case 2:200===t.sent.status&&alert("创建成功！");case 4:case"end":return t.stop()}}),t)})))),k.addEventListener("keypress",function(){var t=n(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Enter"!=r.key){t.next=5;break}return t.next=3,b(k.value);case 3:200===t.sent.status&&alert("创建成功！");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){e=function(){return n};var r,n={},o=Object.prototype,a=o.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(r){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:O(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var y="suspendedStart",d="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var L=Object.getPrototypeOf,S=L&&L(L(N([])));S&&S!==o&&a.call(S,s)&&(k=S);var E=x.prototype=w.prototype=Object.create(k);function _(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function P(e,r){function n(o,i,c,s){var u=p(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==t(f)&&a.call(f,"__await")?r.resolve(f.__await).then((function(t){n("next",t,c,s)}),(function(t){n("throw",t,c,s)})):r.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return n("throw",t,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,e){function a(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(a,a):a()}})}function O(t,e,n){var o=y;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:r,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=p(t,e,n);if("normal"===u.type){if(o=n.done?v:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,e){var n=e.method,o=t.iterator[n];if(o===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,j(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,g;var i=a.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,g):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function q(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(q,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(a.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=r,t.done=!0,t};return i.next=i}}throw new TypeError(t(e)+" is not iterable")}return b.prototype=x,i(E,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},n.awrap=function(t){return{__await:t}},_(P.prototype),f(P.prototype,u,(function(){return this})),n.AsyncIterator=P,n.async=function(t,e,r,o,a){void 0===a&&(a=Promise);var i=new P(h(t,e,r,o),a);return n.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(E),f(E,l,"Generator"),f(E,s,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:N(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),g}},n}function n(t,e,r,n,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,a){var i=t.apply(e,r);function c(t){n(i,o,a,c,s,"next",t)}function s(t){n(i,o,a,c,s,"throw",t)}c(void 0)}))}}function a(t){throw new TypeError('"'+t+'" is read-only')}r(659),r(163),r(452);var i=JSON.parse(sessionStorage.getItem("tokenData")),c=i.access_token;function s(){return(s=o(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(sessionStorage.getItem("tokenData")){t.next=8;break}return JSON.parse(sessionStorage.getItem("tokenData")),a("tokenData"),i.access_token,a("access_token"),console.log(c),t.next=6,new Promise((function(t){return setTimeout(t,1e3)}));case 6:t.next=0;break;case 8:console.log("Token已获取");case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}null===c&&(i.access_token,a("access_token"),function(){s.apply(this,arguments)}());var u={Authorization:"Bearer ".concat(c)};function l(t,e){return f.apply(this,arguments)}function f(){return(f=o(e().mark((function t(r,n){var o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=sessionStorage.getItem("spotify_device_id")){t.next=4;break}return console.error("No access token or device ID found!"),t.abrupt("return");case 4:return t.next=6,fetch("https://api.spotify.com/v1/me/player/play?device_id=".concat(o),{method:"PUT",headers:r,body:JSON.stringify({uris:n})});case 6:console.log("Playing track:",n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t,e){return p.apply(this,arguments)}function p(){return(p=o(e().mark((function t(r,n){var o,a,i;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(r),o=new URLSearchParams({limit:50,offset:0}),t.prev=3,t.next=6,fetch("https://api.spotify.com/v1/albums/".concat(n,"/tracks?").concat(o),{method:"GET",headers:r});case 6:return a=t.sent,t.next=9,a.json();case 9:return i=t.sent,t.abrupt("return",i);case 13:t.prev=13,t.t0=t.catch(3),console.log("Request Failed:",t.t0);case 16:case"end":return t.stop()}}),t,null,[[3,13]])})))).apply(this,arguments)}function y(){return d.apply(this,arguments)}function d(){return(d=o(e().mark((function t(){var r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=document.querySelectorAll("#album"),console.log(r),r.forEach((function(t){t.addEventListener("dblclick",o(e().mark((function r(){var n,o,a,i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("click"),!(n=t.querySelector("img"))||!n.id){e.next=31;break}return console.log(n.id),e.next=6,g(n.id);case 6:return o=e.sent,console.log(o),o[0]?document.querySelector(".like").style.backgroundColor="red":document.querySelector(".like").style.backgroundColor="rgb(180,180,180,0.5)",e.next=11,h(u,n.id);case 11:a=e.sent,console.log(a.items.map((function(t){return t.uri}))),l(u,a.items.map((function(t){return t.uri}))),k(u),m(),a.items.forEach((function(t){v(t.track_number,t.uri,t.name,t.artists[0].name,a.name,"".concat(parseInt(t.duration_ms/1e3/60),":").concat(parseInt(t.duration_ms/1e3-60*parseInt(t.duration_ms/1e3/60))),n.src)})),document.querySelector("#showlist").style.display="flex",document.querySelector("#mainViewBar").style.display="none",(i=document.querySelector("#listPhoto img")).src=n.src,i.id=n.id,document.querySelector(".makerAndNumber p").innerHTML="".concat(a.items[0].artists[0].name,"·").concat(a.total,"首歌曲"),document.querySelector(".listName p").innerHTML=t.querySelector(".name").innerHTML,Y(),e.next=32;break;case 31:console.log("No image or ID found in album block.");case 32:case"end":return e.stop()}}),r)}))))}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(){document.getElementById("body").innerHTML=""}function v(t,e,r,n,o,a,i){var c=document.createElement("div");c.classList.add("singleSongBlock");var s=document.createElement("p");s.classList.add("num"),s.textContent=t;var u=document.createElement("div");u.classList.add("songPhoto");var l=document.createElement("img");l.src=i,l.id=e,u.appendChild(l);var f=document.createElement("div");f.classList.add("singleSongInfo");var h=document.createElement("p");h.classList.add("singleSongName"),h.textContent=r;var p=document.createElement("p");p.classList.add("maker"),p.textContent=n,f.appendChild(h),f.appendChild(p);var y=document.createElement("div");y.classList.add("belongAlbum");var d=document.createElement("p");d.textContent=o,y.appendChild(d);var m=document.createElement("div");m.classList.add("time");var v=document.createElement("p");v.textContent=a,m.appendChild(v),c.appendChild(s),c.appendChild(u),c.appendChild(f),c.appendChild(y),c.appendChild(m),document.getElementById("body").appendChild(c)}function g(t){return w.apply(this,arguments)}function w(){return(w=o(e().mark((function t(r){var n,o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://api.spotify.com/v1/me/albums/contains?ids=".concat(r),{method:"GET",headers:u});case 3:return n=t.sent,t.next=6,n.json();case 6:return o=t.sent,t.abrupt("return",o);case 10:t.prev=10,t.t0=t.catch(0),console.log("checkalbumerror:",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function b(t){return x.apply(this,arguments)}function x(){return(x=o(e().mark((function t(r){var n,o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://api.spotify.com/v1/me/player/currently-playing",{method:"GET",headers:r});case 3:return n=t.sent,t.next=6,n.json();case 6:return o=t.sent,t.abrupt("return",o);case 10:t.prev=10,t.t0=t.catch(0),t.t0.name,console.log("Request Failed:",t.t0.name);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function k(t){return L.apply(this,arguments)}function L(){return(L=o(e().mark((function t(r){var n,o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(r);case 2:(n=t.sent)&&n.item&&(console.log(n.item),(o=document.querySelector("#albumPhoto img")).src=n.item.album.images[0].url,o.id=n.item.uri,document.querySelector("#songName p").innerHTML=n.item.name,document.querySelector("#singer p").innerHTML=n.item.artists[0].name,!1===n.is_playing?(console.log("isPlaying"),E()):(console.log("notPlaying"),S()));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){var t=document.querySelectorAll("#pause"),e=document.querySelectorAll("#resume");!0===document.querySelector("#switchMod").checked?(console.log("checked"),t[0].style.display="block",t[1].style.display="none",e[0].style.display="none",e[1].style.display="none"):(console.log("unchecked"),t[0].style.display="none",t[1].style.display="block",e[0].style.display="none",e[1].style.display="none"),console.log("pause")}function E(){var t=document.querySelectorAll("#pause"),e=document.querySelectorAll("#resume");!0===document.querySelector("#switchMod").checked?(t[0].style.display="none",e[0].style.display="block"):(t[1].style.display="none",e[1].style.display="block"),console.log("resume")}function _(t){return P.apply(this,arguments)}function P(){return(P=o(e().mark((function t(r){var n,o,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=sessionStorage.getItem("spotify_device_id"),console.log("stopPlaying"),t.prev=2,t.next=5,fetch("https://api.spotify.com/v1/me/player/".concat(r,"?device_id=").concat(n),{method:"PUT",headers:u});case 5:o=t.sent,a=o.json(),o.ok||console.log("getdatastatus",a.status),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log("stopPlayingError",t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}function O(t){return j.apply(this,arguments)}function j(){return(j=o(e().mark((function t(r){var n,o,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=sessionStorage.getItem("spotify_device_id"),console.log("stopPlaying"),t.prev=2,t.next=5,fetch("https://api.spotify.com/v1/me/player/".concat(r,"?device_id=").concat(n),{method:"POST",headers:u});case 5:o=t.sent,a=o.json(),o.ok||console.log("getdatastatus",a.status),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log("stopPlayingError",t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}setInterval((function(){return k(u)}),5e3),document.querySelectorAll("#pause").forEach((function(t){t.addEventListener("click",o(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_("pause");case 2:S(),console.log("click");case 4:case"end":return t.stop()}}),t)}))))})),document.querySelectorAll("#resume").forEach((function(t){t.addEventListener("click",o(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_("play");case 2:E(),console.log("click");case 4:case"end":return t.stop()}}),t)}))))})),document.querySelectorAll("#next").forEach((function(t){t.addEventListener("click",o(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("next");case 2:E(),console.log("click");case 4:case"end":return t.stop()}}),t)}))))})),document.querySelectorAll("#previous").forEach((function(t){t.addEventListener("click",o(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("previous");case 2:E(),console.log("click");case 4:case"end":return t.stop()}}),t)}))))}));var q=document.querySelector("#Home"),I=document.querySelector("#showlist"),T=document.querySelector("#mainViewBar");q.addEventListener("click",(function(){I.style.display="none",T.style.display="flex"})),document.querySelector("#listPhoto img").id;var N=document.querySelector(".like");function G(t){return A.apply(this,arguments)}function A(){return(A=o(e().mark((function t(r){var n,o,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new URLSearchParams({ids:r}),t.prev=2,t.next=5,fetch("https://api.spotify.com/v1/me/albums?".concat(n),{method:"PUT",headers:u,body:{ids:[r]}});case 5:return o=t.sent,t.next=8,o.json();case 8:return a=t.sent,t.abrupt("return",a);case 12:t.prev=12,t.t0=t.catch(2),console.log("Request Failed:",t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}function C(){return(C=o(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(r);case 2:if(!t.sent[0]){t.next=9;break}return t.next=6,F(r);case 6:N.style.backgroundColor="rgb(180,180,180,0.5)",t.next=13;break;case 9:return t.next=11,G(r);case 11:t.sent,N.style.backgroundColor="red";case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(t){return R.apply(this,arguments)}function R(){return(R=o(e().mark((function t(r){var n,o,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new URLSearchParams({ids:r}),t.prev=2,t.next=5,fetch("https://api.spotify.com/v1/me/albums?".concat(n),{method:"DELETE",headers:u,body:{ids:[r]}});case 5:return o=t.sent,t.next=8,o.json();case 8:return a=t.sent,t.abrupt("return",a);case 12:t.prev=12,t.t0=t.catch(2),console.log("Request Failed:",t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}function D(t){return B.apply(this,arguments)}function B(){return(B=o(e().mark((function t(r){var n,o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return new URLSearchParams({playlist_id:r}),t.prev=2,t.next=5,fetch("https://api.spotify.com/v1/playlists/".concat(r),{method:"GET",headers:u});case 5:return n=t.sent,t.next=8,n.json();case 8:return o=t.sent,t.abrupt("return",o);case 12:t.prev=12,t.t0=t.catch(2),console.log("Request Failed:",t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}function M(){return H.apply(this,arguments)}function H(){return(H=o(e().mark((function t(){var r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=document.querySelectorAll("#playlist"),console.log(r),r.forEach((function(t){t.addEventListener("dblclick",o(e().mark((function r(){var n,o,a,i,c;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("click"),!(n=t.querySelector("img"))||!n.id){e.next=31;break}return console.log(n.id),e.next=6,g(n.id);case 6:return o=e.sent,console.log(o),o[0]?document.querySelector(".like").style.backgroundColor="red":document.querySelector(".like").style.backgroundColor="rgb(180,180,180,0.5)",e.next=11,D(n.id);case 11:a=e.sent,l(u,a.tracks.items.map((function(t){return t.uri}))),k(u),m(),i=1,a.tracks.items.forEach((function(t){v(i++,t.track.uri,t.track.name,t.track.artists[0].name,t.track.album.name,"".concat(String(parseInt(t.track.duration_ms/1e3/60)),":").concat(String(parseInt(t.track.duration_ms/1e3-60*parseInt(t.track.duration_ms/1e3/60))).padStart(2,"0")),t.track.album.images[0].url)})),document.querySelector("#showlist").style.display="flex",document.querySelector("#mainViewBar").style.display="none",(c=document.querySelector("#listPhoto img")).src=n.src,c.id=n.id,document.querySelector(".makerAndNumber p").innerHTML="".concat(a.owner.display_name,"·").concat(a.tracks.total,"首歌曲"),document.querySelector(".listName p").innerHTML=a.name,setTimeout(Y,1e3),e.next=32;break;case 31:console.log("No image or ID found in album block.");case 32:case"end":return e.stop()}}),r)}))))}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(){var t=document.querySelectorAll(".singleSongBlock");console.log(t),t.forEach((function(t){t.addEventListener("dblclick",(function(){var e=t.querySelector(".songPhoto img");l(u,[e.id])}))}))}function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function J(){J=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new q(n||[]);return o(i,"_invoke",{value:_(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function w(){}var b={};u(b,i,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(I([])));k&&k!==r&&n.call(k,i)&&(b=k);var L=w.prototype=v.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,a,i,c){var s=f(t[o],t,a);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==U(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function _(e,r,n){var o=h;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=P(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:p,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(U(e)+" is not iterable")}return g.prototype=w,o(L,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,s,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},S(E.prototype),u(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new E(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(L),u(L,s,"Generator"),u(L,i,(function(){return this})),u(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,q.prototype={constructor:q,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function z(t,e,r,n,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function V(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){z(a,n,o,i,c,"next",t)}function c(t){z(a,n,o,i,c,"throw",t)}i(void 0)}))}}function W(t){throw new TypeError('"'+t+'" is read-only')}N.addEventListener("click",(function(){!function(t){C.apply(this,arguments)}(document.querySelector("#listPhoto img").id)}));var K=JSON.parse(sessionStorage.getItem("tokenData")),Q=K.access_token;console.log(Q);var X="Bearer ".concat(Q);function Z(){return(Z=V(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(sessionStorage.getItem("tokenData")){t.next=8;break}return JSON.parse(sessionStorage.getItem("tokenData")),W("tokenData"),K.access_token,W("access_token"),console.log(Q),t.next=6,new Promise((function(t){return setTimeout(t,1e3)}));case 6:t.next=0;break;case 8:console.log("Token已获取");case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $(t){return tt.apply(this,arguments)}function tt(){return(tt=V(J().mark((function t(e){var r,n;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://api.spotify.com/v1/me",{method:"GET",headers:e});case 3:return r=t.sent,t.next=6,r.json();case 6:return n=t.sent,t.abrupt("return",n);case 10:t.prev=10,t.t0=t.catch(0),console.log("Request Failed:",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function et(){return(et=V(J().mark((function t(){var e,r,n;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$(X);case 2:return e=t.sent,r=e.id,sessionStorage.setItem("userId",r),console.log(e.id),n=e.images[0].url,document.querySelector("#userImg img").src=n,t.abrupt("return");case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}null===Q&&(K.access_token,W("access_token"),function(){Z.apply(this,arguments)}()),X={Authorization:"Bearer ".concat(Q)},function(){et.apply(this,arguments)}();var rt=sessionStorage.getItem("userId");function nt(t,e){return ot.apply(this,arguments)}function ot(){return(ot=V(J().mark((function t(e,r){var n,o,a;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new URLSearchParams({user_id:r,limit:3,offset:0}),t.prev=2,t.next=5,fetch("https://api.spotify.com/v1/users/".concat(r,"/playlists?").concat(n),{method:"GET",headers:e});case 5:return o=t.sent,t.next=8,o.json();case 8:return a=t.sent,t.abrupt("return",a);case 12:t.prev=12,t.t0=t.catch(2),console.log("Request Failed:",t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}function at(t){return it.apply(this,arguments)}function it(){return(it=V(J().mark((function t(e){var r,n,o;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new URLSearchParams({limit:10,offset:0}),t.prev=2,t.next=5,fetch("https://api.spotify.com/v1/me/albums?".concat(r),{method:"GET",headers:e});case 5:return n=t.sent,t.next=8,n.json();case 8:return o=t.sent,t.abrupt("return",o);case 12:t.prev=12,t.t0=t.catch(2),console.log("Request Failed:",t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}function ct(){return(ct=V(J().mark((function t(e,r){var n,o,a,i,c,s,u,l,f,h,p,d,m,v;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nt(e,r);case 2:for(n=t.sent,o=n.items,a=document.querySelectorAll(".collections"),i=document.querySelectorAll(".collections img"),c=0,s=document.querySelectorAll(".collectionInfo .name"),u=document.querySelectorAll(".collectionArtist");c<o.length&&c<9;c++)a[c].id="playlist",o[c].images?i[c].src=o[c].images[0].url:i[c].src="https://misc.scdn.co/liked-songs/liked-songs-64.png",i[c].id=o[c].id,s[c].innerHTML=o[c].name,u[c].innerHTML=o[c].owner.display_name,s[c].id=o[c].uri;return M(),t.next=13,at(e);case 13:for(l=t.sent,f=l.items,h=0;c<f.length&&c<9;c++)a[c].id="album",i[c].id=f[h].album.id,i[c].src=f[h].album.images[0].url,s[c].innerHTML=f[h].album.name,u[c].innerHTML=f[h].album.artists[0].name,s[c].id=f[h].album.uri,h++;for(p=document.querySelectorAll(".recentPlayBlock"),d=document.querySelectorAll(".recentPlayBlock img"),m=document.querySelectorAll(".recentPlayBlock p"),v=0;v<d.length;v++)p[v].id="album",d[v].src=f[v].album.images[0].url,d[v].id=f[v].album.id,m[v].innerHTML=f[v].album.name;return y(),t.abrupt("return");case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){ct.apply(this,arguments)}(X,rt);var st=document.querySelector(".repository"),ut=document.querySelector("#main");function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function ft(){ft=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new q(n||[]);return o(i,"_invoke",{value:_(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function w(){}var b={};u(b,i,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(I([])));k&&k!==r&&n.call(k,i)&&(b=k);var L=w.prototype=v.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,a,i,c){var s=f(t[o],t,a);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==lt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function _(e,r,n){var o=h;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=P(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:p,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(lt(e)+" is not iterable")}return g.prototype=w,o(L,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,s,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},S(E.prototype),u(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new E(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(L),u(L,s,"Generator"),u(L,i,(function(){return this})),u(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,q.prototype={constructor:q,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function ht(t,e,r,n,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function pt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){ht(a,n,o,i,c,"next",t)}function c(t){ht(a,n,o,i,c,"throw",t)}i(void 0)}))}}function yt(t){throw new TypeError('"'+t+'" is read-only')}st.addEventListener("click",(function(){var t=window.getComputedStyle(ut).gridTemplateColumns;if(t.includes("97px")){ut.style.gridTemplateColumns="300px 1fr 1fr";var e=document.querySelectorAll(".collectionInfo");document.querySelector(".repository h2").style.display="block",e.forEach((function(t){t.style.display="flex"}))}if(t.includes("300px")){ut.style.gridTemplateColumns="97px 1fr 1fr";var r=document.querySelectorAll(".collectionInfo");document.querySelector(".repository h2").style.display="none",r.forEach((function(t){t.style.display="none"}))}}));var dt=JSON.parse(sessionStorage.getItem("tokenData")),mt=dt.access_token;console.log(mt);var vt="Bearer ".concat(mt);function gt(){return(gt=pt(ft().mark((function t(){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(sessionStorage.getItem("tokenData")){t.next=8;break}return JSON.parse(sessionStorage.getItem("tokenData")),yt("tokenData"),dt.access_token,yt("access_token"),console.log(mt),t.next=6,new Promise((function(t){return setTimeout(t,1e3)}));case 6:t.next=0;break;case 8:console.log("Token已获取");case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}null===mt&&(dt.access_token,yt("access_token"),function(){gt.apply(this,arguments)}()),vt={Authorization:"Bearer ".concat(mt)};var wt=document.querySelector("#newReleases"),bt=document.querySelector("#featuredPlaylists");function xt(t){return kt.apply(this,arguments)}function kt(){return(kt=pt(ft().mark((function t(e){var r,n,o;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new URLSearchParams({locale:"zh_TW",limit:8,offset:0}),t.prev=2,t.next=5,fetch("https://api.spotify.com/v1/browse/categories?".concat(r),{method:"GET",headers:e});case 5:return n=t.sent,t.next=8,n.json();case 8:return o=t.sent,M(),t.abrupt("return",o);case 13:t.prev=13,t.t0=t.catch(2),console.log("Request Failed:",t.t0);case 16:case"end":return t.stop()}}),t,null,[[2,13]])})))).apply(this,arguments)}function Lt(t){return St.apply(this,arguments)}function St(){return(St=pt(ft().mark((function t(e){var r,n,o;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new URLSearchParams({limit:8,offset:0}),t.prev=2,t.next=5,fetch("https://api.spotify.com/v1/browse/new-releases?".concat(r),{method:"GET",headers:e});case 5:return n=t.sent,t.next=8,n.json();case 8:return o=t.sent,t.abrupt("return",o);case 12:t.prev=12,t.t0=t.catch(2),console.log("Request Failed:",t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}function Et(t){return _t.apply(this,arguments)}function _t(){return(_t=pt(ft().mark((function t(e){var r,n,o,a,i,c;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xt(e);case 2:for(r=t.sent,n=r.categories.items,o=document.querySelectorAll(".album"),a=document.querySelectorAll(".album img"),i=document.querySelectorAll(".album p"),c=0;c<8;c++)o[c].id="playlist",a[c].src=n[c].icons[0].url,a[c].id=n[c].id,o[c].style.setProperty("--album-background","url(".concat(n[c].icons[0].url,")")),i[c].innerHTML=n[c].name;case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pt(){return(Pt=pt(ft().mark((function t(e){var r,n,o,a,i,c;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Lt(e);case 2:for(r=t.sent,n=r.albums.items,o=document.querySelectorAll(".album img"),a=document.querySelectorAll(".album"),i=document.querySelectorAll(".album p"),c=0;c<8;c++)a[c].id="album",o[c].src=n[c].images[0].url,a[c].style.setProperty("--album-background","url(".concat(n[c].images[0].url,")")),o[c].id=n[c].id,i[c].innerHTML=n[c].name;y();case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}wt.addEventListener("click",(function(){wt.className="styleBlockActive",function(t){Pt.apply(this,arguments)}(vt),bt.className="styleBlock"})),bt.addEventListener("click",(function(){bt.className="styleBlockActive",Et(vt),wt.className="styleBlock"})),Et(vt),r(236),r(821)})()})();